<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Bootstrap4 Paginator tests</title>
        <link rel="stylesheet" href="../css/qunit.css">
        <!--<link rel="stylesheet" href="../css/bootstrap-responsive.css">-->
        <link rel="stylesheet" href="../css/bootstrap.bundle.min.css">
        <script src="../lib/jquery.min.js" type="text/javascript"></script>
        <script src="../lib/bootstrap.min.js" type="text/javascript"></script>
    </head>
    <body>
        <ul id="paginator-test"></ul>
        <div id="qunit"></div>
        <div id="qunit-fixture"></div>
        <div id='bp-3-element-QUnit.test'></div>
        <span id='bp-2-element-QUnit.test'></span>
        <script src="../src/bootstrap-paginator.js"></script>
        <!-- <script src="../src/bootstrap-paginator.ru.js"></script> -->
        <!-- <script src="../build/bootstrap-paginator.min.js"></script> -->
        <script src="../lib/qunit.js"></script>

        <script type="text/javascript">



    $(function(){

        let container = $('#paginator-test');

        QUnit.module("getOption functionality test, 11 pages, maximum 3 pages visible",{
            before: function(){
                let options = {
                    currentPage:1,
                    numberOfPages: 3,
                    totalPages:11,
                    pageUrl:function(type,page){
                        return null;
                    },
                    onPageClicked:null,
                    onPageChanged:null
                };

                container.bootstrapPaginator(options);
            },
            after: function(){
                container.bootstrapPaginator('destroy');
            }
        });


        QUnit.test("Test getOption returns options object", function(assert){
            let opt = container.bootstrapPaginator("getOption");
            assert.ok(opt,"Options not null");
        });



        /**
         *
         * Tests the get option result. When the current page is 1 under the configuration, there will be no first and previous page,
         * current page will be 1, next page will be 2, and last page will be 11. Second page within the pages item is 2.
         *
         * */
        QUnit.test("test getOption result,current page 1",function(assert){

            let options = container.bootstrapPaginator("getOption");

            assert.equal(options.currentPage,1,"Current page of initial setup is 1.");

            assert.equal(options.numberOfPages,3,"No first page in the initial setup");

            assert.equal(options.totalPages, 11, "No previous page in the initial setup");
        });

        /**
         *
         * QUnit.tests the get page result. When the current page is 2 under the configuration, first and previous page is 1,
         * next is 3, last is 11, the 3rd page item is 3.
         *
         * */
        QUnit.test("Test getOption result current page 2",function(assert){
            
            let newOptions = {
                currentPage: 2
            };

            container.bootstrapPaginator(newOptions);

            let options = container.bootstrapPaginator("getOption");

            assert.equal(options.currentPage,2,"Current page of initial setup is 2.");

            assert.equal(options.numberOfPages,3,"No first page in the initial setup");

            assert.equal(options.totalPages, 11, "No previous page in the initial setup");
        });

        /**
         * Tests the get page result, when the current page is 10, first is 1, previous is 9, next and last are 11.
         *
         * */
        QUnit.test("Test getOption result with current page 10",function(assert){
            
            let newOptions = {
                currentPage: 10
            };

            container.bootstrapPaginator(newOptions);

            let options = container.bootstrapPaginator("getOption");

            assert.equal(options.currentPage,10,"Current page of initial setup is 10.");
        });

        /**
         * Tests the get page result, when the current page is 11, first is 1, previous is 10, no next and last item.
         * the length of pages is 2.
         *
         * */
        QUnit.test("Test get option result with current page 11",function(assert){
            let newOptions = {
                currentPage: 11
            };

            container.bootstrapPaginator(newOptions);

            let options = container.bootstrapPaginator("getOption");

            assert.equal(options.currentPage,11,"Current page of initial setup is 11.");
        });

        /**
         * Tests the functionality of getValueFromOption. this function is how the program turn the function attribute into
         * value when deciding it.
         *
         *
         * */
        QUnit.module("getValueFromOption functionality test",{

            before: function(){
                let options = {
                    currentPage:1,
                    numberOfPages: 3,
                    totalPages:11,
                    pageUrl:function(type,page){
                        return null;
                    },
                    onPageClicked:null,
                    onPageChanged:null
                };

                container.bootstrapPaginator(options);
            },
            after: function(){
                container.bootstrapPaginator('destroy');
            }
        });

        /**
         * Tests both a string parameter and a function parameter, string parameter should return the orignial string,
         * while function one must give the return value of that function.
         * */
        QUnit.test("Test the functionality of the getValueFromOption",function(assert){

            let result = container.bootstrapPaginator("getValueFromOption","a");

            assert.equal(result,"a","value from the option function is a");

            result = container.bootstrapPaginator("getValueFromOption",function(a){

                return a+1;

            },1010);

            assert.equal(result,1011,"value from the option function is 1011");
        });

        /**
         * Tests the buildPageItem function. the function builds individual page item by providing only the
         * */
        QUnit.module("buildPageItem functionality test",{

            before: function(){

                let options = {
                    currentPage:2,
                    numberOfPages: 3,
                    totalPages:11,
                    pageUrl:function(type,page){
                        return null;
                    },
                    onPageClicked:null,
                    onPageChanged:null,


                };

                container.bootstrapPaginator(options);
            },
            after: function(){
                container.bootstrapPaginator('destroy');
            }
        });

        /**
         *
         * Renders different types of options. and check the html node and text within it.
         *
         * */
        QUnit.test("Test individual page item rendering ", function(assert){

            let options = container.bootstrapPaginator("getOption");

            let first = container.bootstrapPaginator("buildPageItem","first",1),
                prev = container.bootstrapPaginator("buildPageItem","prev",1),
                next = container.bootstrapPaginator("buildPageItem","next",4),
                last = container.bootstrapPaginator("buildPageItem","last",options.totalPages),
                current = container.bootstrapPaginator("buildPageItem","page",options.currentPage);

            assert.ok(first.is("li"),"check whether the wrapping element is a li");

            let childOfFirst = first.children();

            assert.equal(childOfFirst.length,1,"length of the children is 1");

            assert.ok(childOfFirst.first().is("a"),"check whether the content container is a");

            assert.equal(childOfFirst.first().text(),"<<","text of first item is <<");

            assert.ok(prev.is("li"),"check whether the wrapping element of prev is a li");

            let childOfPrev = prev.children();

            assert.equal(childOfPrev.length,1,"length of the previous children is 1");

            assert.ok(childOfPrev.first().is("a"),"check whether the previous content container is a");

            assert.equal(childOfPrev.first().text(),"<","text of previous item is <");

            let childOfCurrent = current.children();

            assert.equal(childOfCurrent.length,1,"length of the current children is 1");

            assert.ok(childOfCurrent.first().is("a"),"check whether the current content container is a");

            assert.equal(childOfCurrent.first().text(),"2","text of current item is 2");

            let childOfNext = next.children();

            assert.equal(childOfNext.length,1,"length of the next children is 1");

            assert.ok(childOfNext.first().is("a"),"check whether the next content container is a");

            assert.equal(childOfNext.first().text(),">","text of next item is >");

            let childOfLast = last.children();

            assert.equal(childOfLast.length,1,"length of the last children is 1");

            assert.ok(childOfLast.first().is("a"),"check whether the last content container is a");

            assert.equal(childOfLast.first().text(),">>","text of last item is >>");

        });

        /**
         * Test the functionality of render function. The test will go for those boundary options.
         *
         * Test cases are: 1, 2, 10, 11
         *
         * */
        QUnit.module("render functionality test",{

            afterEach: function(){
                container.bootstrapPaginator('destroy');
           }
        });

        /**
         * Test case 1, there will be 7 items: <<, <, 1, 2, 3, >, >>
         * */
        QUnit.test("Test rendering for page = 1",function(assert){

            let options = {
                currentPage:1,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            let pageItems = container.children();

            assert.equal(pageItems.length,7,"page items in this case is 3 page items plus first, prev, next and last");

            assert.equal($($(pageItems[0]).children()[0]).text(),'<<',"first page item is fist with text '<<'");

            assert.ok($(pageItems[2]).hasClass("active"),"first page 1 is an active page");

            assert.equal($($(pageItems[3]).children()[0]).text(),'2',"second item is 2");

            assert.equal($($(pageItems[4]).children()[0]).text(),'3',"third item is 3");

            assert.equal($($(pageItems[5]).children()[0]).text(),">","fourth item is next");

            assert.equal($($(pageItems[6]).children()[0]).text(),">>","fifth item is last");
        });

        /**
         * Test case 2, there will be 5 items: 1, 2, 3 and >, >>
         * */
        QUnit.test("Test rendering for page = 1, but always show first and prev is off", function(assert){


            let options = {
                currentPage:1,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null,
                alwaysDisplayNextPrevButtons: false,
                alwaysDisplayFirstLastButtons: false
            };

            container.bootstrapPaginator(options);

            let pageItems = container.children();

            assert.equal(pageItems.length,7,"page items in this case is 3 page items plus first, prev, next and last");

            assert.equal($($(pageItems[0]).children()[0]).text(),'<<',"first page item is fist with text '<<'");
            
            assert.equal($(pageItems[0]).css("display"),"none", "first page item is hided");

            assert.equal($(pageItems[1]).css("display"),"none","second page item is also hided");

            assert.ok($(pageItems[2]).hasClass("active"),"first page 1 is an active page");

            assert.equal($($(pageItems[3]).children()[0]).text(),'2',"second item is 2");

            assert.equal($($(pageItems[4]).children()[0]).text(),'3',"third item is 3");

            assert.equal($($(pageItems[5]).children()[0]).text(),">","fourth item is next");

            assert.equal($($(pageItems[6]).children()[0]).text(),">>","fifth item is last");
        });

        /**
         * Test case 10, there will be 7 items, <<, <, 9, 10, 11, >, >>
         * */
        QUnit.test("Test rendering for page = 10", function(assert){

            let options = {
                currentPage:10,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            let pageItems = container.children();

            assert.equal(pageItems.length,7,"page items in this case is first, previous, 3 page items plus next and last");

            assert.equal($($(pageItems[0]).children()[0]).text(),'<<',"first item is first page with text <<");

            assert.equal($($(pageItems[1]).children()[0]).text(),'<',"second item is previous page wiht text <");

            assert.equal($($(pageItems[2]).children()[0]).text(),'9',"third page item is 9");

            assert.equal($($(pageItems[3]).children()[0]).text(),'10',"fourth page item is 10");

            assert.ok($(pageItems[3]).hasClass("active"),"fourth page item is an active page");

            assert.equal($($(pageItems[4]).children()[0]).text(),'11',"fifth page item is 11");

            assert.equal($($(pageItems[5]).children()[0]).text(),">","sixth item is next");

            assert.equal($($(pageItems[6]).children()[0]).text(),">>","seventh item is last");
        });

        /**
         * Test case 11 and numberOfPages is 2, there will be 6 items, <<, <, 10, 11, >, >>
         * */
        QUnit.test("Test rendering for page = 11",function(assert){

            let options = {
                currentPage:11,
                numberOfPages: 2,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            let pageItems = container.children();

            assert.equal(pageItems.length,6,"page items in this case is first, previous, 3 page items plus next and last");

            assert.equal($($(pageItems[0]).children()[0]).text(),'<<',"first item is first page with text <<");

            assert.equal($($(pageItems[1]).children()[0]).text(),'<',"second item is previous page wiht text <");

            assert.equal($($(pageItems[2]).children()[0]).text(),'10',"third page item is 10");

            assert.equal($($(pageItems[3]).children()[0]).text(),'11',"fourth page item is 11");

            assert.ok($(pageItems[3]).hasClass("active"),"fourth page item is an active page");

            assert.equal($($(pageItems[4]).children()[0]).text(),">","fifth item is next");

            assert.equal($($(pageItems[5]).children()[0]).text(),">>","sixth item is last");
        });

        /**
         * Tests the show functionality.
         * */
        QUnit.module("show functionality test",{

            afterEach: function(){
                container.bootstrapPaginator('destroy');
            }

        });

        /**
         * Test case shows the page 5 and check whether the page 5 is active and the text is 5.
         * */
        QUnit.test("Test normal show function with current page = 1, page = 5, totalPages = 11.",function(assert){

            let options = {
                currentPage:1,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            container.bootstrapPaginator("show",5);

            let list = container.children();

            assert.equal(list.length,7,"page items should be 7");

            assert.ok($(list[3]).hasClass("active"),'page 5 is active');

            assert.equal($(list[3]).text(),5,'active page text is 5');

        });

        /**
         * Test case shows the first page and check whether the first page 1 is active and the text is 1.
         * */
        QUnit.test("Test showFirst function,currentPage = 2, totalPages = 11",function(assert){

            container.bootstrapPaginator("destroy");

            let options = {
                currentPage:2,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            container.bootstrapPaginator("showFirst");

            let list = container.children();

            assert.ok($(list[2]).hasClass("active"),'page 1 is active');

            assert.equal($(list[2]).text(),"1",'active page text is 1');

        });


        /**
         * Test case shows the previous page and check whether the previous page 2 is active and the text is 2.
         * */
        QUnit.test("Test showPrevious function,currentPage = 3, totalPages = 11",function(assert){

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            container.bootstrapPaginator("showPrevious");

            let list = container.children();

            assert.ok($(list[3]).hasClass("active"),'page 2 is active');

            assert.equal($(list[3]).text(),2,'active page text is 2');

        })

        /**
         * Test case shows the next page and check whether the next page 4 is active and the text is 4.
         * */
        QUnit.test("Test showNext function, currentPage = 3, totalPages= 11",function(assert){

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            container.bootstrapPaginator("showNext");

            let list = container.children();

            assert.ok($(list[3]).hasClass("active"),'page 4 is active');

            assert.equal($(list[3]).text(),4,'active page text is 4');

        });

        /**
         * Test case shows the last page and check whether the last page 11 is active and the text is 11.
         * */
        QUnit.test("Test showLast function, currentPage = 3, totalPages = 11",function(assert){

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            container.bootstrapPaginator("showLast");

            let list = container.children();

            assert.ok($(list[4]).hasClass("active"),'page 11 is active');

            assert.equal($(list[4]).text(),11,'active page text is 11');

        });

        /**
         * Tests two events, onPageClicked and onPageChanged. onPageClicked will test all types of options.
         * */
        QUnit.module("event Testing",{

            afterEach: function(){
                container.bootstrapPaginator('destroy');
            }

        })

        /**
         * QUnit.tests the numeric page item click event, check whether the type and page are alright and whether there is the original event
         *
         * */
        QUnit.test("test onPageClicked event, will click on page 2",function(assert){

            let typeAct = null,
                pageAct = null,
                originalEventAct = null;

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:function(e,originalEvent,type,page){

                    typeAct = type

                    pageAct = page

                    originalEventAct = originalEvent;
                },
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            let list = container.children();

            //click page 2

            $($(list[2]).children()).first().click();

            assert.equal(typeAct,"page","type for page 2 is page");

            assert.equal(pageAct,"2","page for page 2 is 2");

            assert.notEqual(originalEventAct,null,"should be an original event");

        });

        /**
         * Tests the first page item click event, check whether the type and page are alright and whether there is the original event
         *
         * */
        QUnit.test("Test onPageClicked event, will click on first page",function(assert){

            let typeAct = null,
                    pageAct = null,
                    originalEventAct = null;

            let options = {
                currentPage: 3,
                numberOfPages: 3,
                totalPages: 11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:function(e,originalEvent,type,page){

                    typeAct = type

                    pageAct = page

                    originalEventAct = originalEvent;
                },
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            let list = container.children();

            //click page 2

            $($(list[0]).children()).first().click();

            assert.equal(typeAct,"first","type for first is first");

            assert.equal(pageAct,"1","page for first page is 1");

            assert.notEqual(originalEventAct,null,"should be an original event");



        })

        /**
         * Tests the previous page item click event, check whether the type and page are alright and whether there is the original event
         *
         * */
        QUnit.test("Test onPageClicked event, will click on previous page",function(assert){

            let typeAct = null,
                pageAct = null,
                originalEventAct = null;

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:function(e,originalEvent,type,page){

                    typeAct = type

                    pageAct = page

                    originalEventAct = originalEvent;
                },
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            let list = container.children();

            //click page 2

            $($(list[1]).children()).first().click();

            assert.equal(typeAct,"prev","type for previous page is prev");

            assert.equal(pageAct,"2","page for previous page is 2");

            assert.notEqual(originalEventAct,null,"should be an original event");
        });

        /**
         * Tests the next page item click event, check whether the type and page are alright and whether there is the original event
         *
         * */
        QUnit.test("Test onPageClicked event, will click on next page",function(assert){

            let typeAct = null,
                    pageAct = null,
                    originalEventAct = null;

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:function(e,originalEvent,type,page){

                    typeAct = type

                    pageAct = page

                    originalEventAct = originalEvent;
                },
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            let list = container.children();

            //click page 2

            $($(list[5]).children()).first().click();

            assert.equal(typeAct,"next","type for next is next");

            assert.equal(pageAct,"4","page for next page is 4");

            assert.notEqual(originalEventAct,null,"should be an original event");
        });

        /**
         * Tests the last page item click event, check whether the type and page are alright and whether there is the original event
         *
         * */
        QUnit.test("Test onPageClicked event, will click on last page",function(assert){

            let typeAct = null,
                    pageAct = null,
                    originalEventAct = null;

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:function(e,originalEvent,type,page){

                    typeAct = type

                    pageAct = page

                    originalEventAct = originalEvent;
                },
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            let list = container.children();

            //click page 2

            $($(list[6]).children()).first().click();

            assert.equal(typeAct,"last","type for last is last");

            assert.equal(pageAct,"11","page for last page is 11");

            assert.notEqual(originalEventAct,null,"should be an original event");
        });

        /**
         * Tests the pageChanged event, check whether the oldValue and the new value are alright.
         *
         * */
        QUnit.test("Test onPageChanged event,",function(assert){

            let oldValue = null,
                newValue = null;

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:function(e,oldPage,newPage){
                    oldValue = oldPage;
                    newValue = newPage;
                }
            };

            container.bootstrapPaginator(options);

            container.bootstrapPaginator("show",11);

            assert.equal(oldValue,"3","old page value is 3");

            assert.equal(newValue,"11","new page value is 11");
        });

        /**
         * Tests the pageChanged event, check whether the oldValue and the new value are alright.
         *
         * */
        QUnit.test("Test page-changed event",function(assert){

            let oldValue = null,
                newValue = null;

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            container.on("page-changed",function(e,oldPage,newPage){
                oldValue = oldPage;
                newValue = newPage;
            });

            container.bootstrapPaginator("show",11);

            assert.equal(oldValue,"3","old page value is 3");

            assert.equal(newValue,"11","new page value is 11");

        });

        /**
         * Tests the pageChanged event, check whether the oldValue and the new value are alright.
         *
         * */
        QUnit.test("Test page-clicked event, will click on last page",function(assert){

            let typeAct = null,
                    pageAct = null,
                    originalEventAct = null;

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            container.on("page-clicked",function(e,originalEvent,type,page){

                typeAct = type;

                pageAct = page;

                originalEventAct = originalEvent;
            });

            let list = container.children();

            //click page 2

            $($(list[6]).children()).first().click();

            assert.equal(typeAct,"last","type for last is last");

            assert.equal(pageAct,"11","page for last page is 11");

            assert.notEqual(originalEventAct,null,"should be an original event");
        });

        QUnit.test("Test whether page-clicked event is stoppable.",function(assert){
            let page = -1;

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:function(e,originalEvent,type,page){
                    e.stopImmediatePropagation();
                },
                onPageChanged:function(event,oldPage,newPage){
                    page = newPage;
                }
            };

            container.bootstrapPaginator(options); 
            
            page = -1;//reset after initial fire

            let list = container.children();

            $($(list[6]).children()).first().click();

            let opt = container.bootstrapPaginator("getOption");

            assert.equal(opt.currentPage,"3","current page hasn't changed");

            assert.equal(page,-1,"Page changed event hasn't been fired");

        });

        /**
         * Tests the exceptions when the page is out of range
         * */
        QUnit.module("exception testing",{

            afterEach: function(){
                container.bootstrapPaginator('destroy');
            }
        })

        /**
         * When shows the page out of 1~totalPages, it will throw and exception with message "Page out of range"
         * */
        QUnit.test("Page range test",function(assert){

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:function(e,oldPage,newPage){

                    oldValue = oldPage;

                    newValue = newPage;  
                }
            };

            container.bootstrapPaginator(options);

            assert.throws(function(){
                container.bootstrapPaginator("show",-1);
            },/range/,"Page out of lower boundary exception when using show");

            assert.throws(function(){
                container.bootstrapPaginator("show",12);
            },/range/,"Page out of upper boundary exception when using show");

            assert.throws(function(){
                container.bootstrapPaginator({currentPage:-2});
            },/range/,"Page out of lower boundary exception when setting the current page through setOptions");

            assert.throws(function(){
                container.bootstrapPaginator({currentPage:25});
            },/range/,"Page out of upper boundary exception when setting the current page through setOptions");
        });

        /**
         * Tests the options when the page is out of range
         * */
        QUnit.module("option testing",{

            afterEach: function(){
                container.bootstrapPaginator('destroy');
            }
        });

        /**
         *
         * Tests the containerClass option, check whether it's been set to the proper element.
         *
         * */
        QUnit.test("Test containerClass, string test and function that returns test will be tested",function(assert){

            let options = {
                containerClass:"test",
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            assert.ok(container.hasClass("test"),"Container should have the class test");
        });

        /**
         *
         * Tests the itemContainerClass, checks whether it's been set to the right element
         *
         * */
        QUnit.test("Test itemContainerClass, string test and function that returns test will be tested,currentPage = 3,totalPage  =11,",function(assert){

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };


            let typeAct = [],
                pageAct = [],
                currentPage = null;

            options.itemContainerClass = function(type, page,current){

                typeAct.push(type);
                pageAct.push(page);
                currentPage = current;
                return "itemCTF";
            }

            container.bootstrapPaginator(options);

            let itemContainer = container.children().first();

            assert.ok(itemContainer.hasClass("itemCTF"),"List should have the class listCTF")

            assert.equal(typeAct[0],"first","Type of the first item should be first");

            assert.equal(pageAct[0],"1","Page of the first item should be first");

            assert.equal(currentPage,"3","Current page is 3");
        });

        /**
         * Tests whether the itemContentClass has been set to the right element.
         * */
        QUnit.test("Test itemContentClass, string QUnit.test and function that returns test will be ested,currentPage = 3,totalPage  =11,",function(assert){

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            options.itemContentClass = "itemContentCT";

            container.bootstrapPaginator(options);

            let itemContent = container.children().first().children().first();

            assert.ok(itemContent.hasClass("itemContentCT"),"Item content should have the class itemContentCT");

            let typeAct = [],
                pageAct = [],
                currentPage = null;


            options.itemContentClass = function(type, page, current){
                typeAct.push(type);
                pageAct.push(page);
                currentPage = current;
                return "itemContentCTF";
            };

            container.bootstrapPaginator(options);

            itemContent = container.children().first().children().first();

            assert.ok(itemContent.hasClass("itemContentCTF"),"List should have the class itemContentCTF");

            assert.equal(typeAct[2],"page","Type of the first page item should be page");

            assert.equal(pageAct[2],"2","Page of the first page item should be 2");

            assert.equal(currentPage,"3","Current page item should be 3");

        });


        /**
         *
         * Tests the itemTexts, a special function is provided. Then each text of the rendered element is checked.
         * */
        QUnit.test("Test itemTexts, string test and function that returns test will be tested,currentPage = 3,totalPage  =11, text function returns type+' '+page+' '+current ",function(assert){

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            options.itemTexts = function(type, page,current){

                return type+" "+page+" "+current;

            };

            container.bootstrapPaginator(options);

            let itemList = container.children();

            assert.equal($(itemList[0]).children().first().text(),"first 1 3","text for first item should be 'first 1 3'");

            assert.equal($(itemList[1]).children().first().text(),"prev 2 3","text for previous item should be 'prev 2 3'");

            assert.equal($(itemList[2]).children().first().text(),"page 2 3","text for first page item should be 'page 2 3'");

            assert.equal($(itemList[3]).children().first().text(),"page 3 3","text for second page item should be 'page 3 3'");

            assert.equal($(itemList[4]).children().first().text(),"page 4 3","text for third page item should be 'page 4 3'");

            assert.equal($(itemList[5]).children().first().text(),"next 4 3","text for next item should be 'next 4 3'");

            assert.equal($(itemList[6]).children().first().text(),"last 11 3","text for last item should be 'last 11 3'");

        });


        /**
         *
         * Tests the pageUrl option. the attribute href of the rendered element is check to see whether it matches the expected result.
         *
         * */
        QUnit.test("Test pageUrl, string test and function that returns test will be tested,currentPage = 3,totalPage  =11, pageUrl function returns type+' '+page+' '+current ",function(assert){

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page,current){
                    return type+' '+page+' '+current;
                },
                onPageClicked:null,
                onPageChanged:null
            };

            container.bootstrapPaginator(options);

            let itemList = container.children();

            assert.equal($(itemList[0]).children().first().attr("href"),"first 1 3","href for first item should be 'first 1 3'");

            assert.equal($(itemList[1]).children().first().attr("href"),"prev 2 3","href for previous item should be 'prev 2 3'");

            assert.equal($(itemList[2]).children().first().attr("href"),"page 2 3","href for first page item should be 'page 2 3'");

            assert.equal($(itemList[3]).children().first().attr("href"),"page 3 3","href for second page item should be 'page 3 3'");

            assert.equal($(itemList[4]).children().first().attr("href"),"page 4 3","href for third page item should be 'page 4 3'");

            assert.equal($(itemList[5]).children().first().attr("href"),"next 4 3","href for next item should be 'next 4 3'");

            assert.equal($(itemList[6]).children().first().attr("href"),"last 11 3","href for last item should be 'last 11 3'");

        });

        /**
         * Tooltip text option is check here by providing a special version of function to see whether it matches the expected result
         * */
        QUnit.test("Test tooltipTitles, string test and function that returns test will be tested,currentPage = 3,totalPage  =11, tooltipTitles function returns type+' '+page+' '+current ",function(assert){
            
            $.fn.bootstrapPaginator.regional["test"] = {
			    first: "first",
			    prev: "prev",
			    next: "next",
			    last: "last",
			    current: "current ${0}",
			    page: "page ${0}"
            };

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                pageUrl:function(type,page,current){
                    return null;
                },
                onPageClicked:null,
                onPageChanged:null,
                useBootstrapTooltip:false,
                language: "test"
            };

            container.bootstrapPaginator(options);

            let itemList = container.children();

            assert.equal($(itemList[0]).children().first().attr("title"),"first","tooltip for first item should be 'first'");

            assert.equal($(itemList[1]).children().first().attr("title"),"prev","tooltip for previous item should be 'prev'");

            assert.equal($(itemList[2]).children().first().attr("title"),"page 2","tooltip for first page item should be 'page 2'");

            assert.equal($(itemList[3]).children().first().attr("title"),"current 3","tooltip for second page item should be 'current 3'");

            assert.equal($(itemList[4]).children().first().attr("title"),"page 4","tooltip for third page item should be 'page 4'");

            assert.equal($(itemList[5]).children().first().attr("title"),"next","tooltip for next item should be 'next'");

            assert.equal($(itemList[6]).children().first().attr("title"),"last","tooltip for last item should be 'last'");
        });

        QUnit.test("Test shouldShowPageButton, string test and function that returns test will be tested,currentPage = 3,totalPage  =11, tooltipTitles function returns type+' '+page+' '+current ",function(assert){

            let types = [],
                pages = [],
                currentPage  = null

            let options = {
                currentPage:3,
                numberOfPages: 3,
                totalPages:11,
                shouldShowPageButton: function(type,page,current){
                    types.push(type)
                    pages.push(page)
                    currentPage = current
                    return false;
                },
                onPageClicked:null,
                onPageChanged:null,
                useBootstrapTooltip:false
            };


            container.bootstrapPaginator(options);

            let itemList = container.children();

            assert.equal(itemList.filter((i,e) => $(e).css("display") !== "none").length,0,"all items are hidden, no pages should be shown");

            assert.equal(types.length, 7 ," should be 7 types inside");

            assert.equal(pages.length, 7 ," should be 7 pages inside");

            assert.equal(types[3], "page" ,"second page item type is page");

            assert.equal(pages[3], 3 ,"second page item page is 3");

            assert.equal(currentPage, 3 ,"current page item page is 3");
        });

        QUnit.test("Test size option", function(assert){

            let options = {
                currentPage: 3,
                totalPages:11
            };

            container.bootstrapPaginator(options);

            assert.ok(container.hasClass("pagination"),"container must have class pagination");

            assert.notOk(container.hasClass("pagination-sm"),"container must not have class pagination-sm");

            assert.notOk(container.hasClass("pagination-lg"),"container must not have class pagination-lg");

            container.bootstrapPaginator({
                size:"small"
            });

            assert.ok(container.hasClass("pagination pagination-sm"),"container must have class pagination and pagination-sm when size is 'small'");

            assert.notOk(container.hasClass("pagination-lg"),false,"container must not have class pagination-lg when size is 'small'");

            container.bootstrapPaginator({
                size:"large"
            });

            assert.equal(container.hasClass("pagination pagination-lg"),true,"container must have class pagination and pagination-lg when size is 'large'");

            assert.equal(container.hasClass("pagination-sm"),false,"container must not have class pagination-sm when size is 'large'");
        });

        QUnit.module("Bad input testing",{

            afterEach: function(){
                container.bootstrapPaginator('destroy');
            }
        })

        QUnit.test("bad input for setOptions, string value feed into numeric attribute,currentPage:'3',numberOfPages:'5',totalPages:'11'",function(assert){

            let options = {
                currentPage:"3",
                numberOfPages: "5",
                totalPages:"11"
            };

            container.bootstrapPaginator(options);

            let opt = container.bootstrapPaginator("getOption");

            assert.equal(opt.currentPage,3,"current page is 3");

            assert.equal(opt.totalPages,11,"total pages is 11");

            assert.equal(opt.numberOfPages,5,"number of pages is 5");
        })

        QUnit.test("bad input for show, string value '5' is feeded",function(assert){
            let options = {
                currentPage: 3,
                numberOfPages: 5,
                totalPages:11
            };

            container.bootstrapPaginator(options);

            container.bootstrapPaginator('show',"5");

            let opt = container.bootstrapPaginator("getOption");

            assert.equal(opt.currentPage,5,"current page is 5");

            assert.equal(opt.totalPages,11,"total pages is 11");

            assert.equal(opt.numberOfPages,5,"number of pages is 5");

        });
    });



</script>
    </body>
</html>